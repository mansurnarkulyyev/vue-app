"use strict";(self["webpackChunkvue_app"]=self["webpackChunkvue_app"]||[]).push([[167],{712:function(t,e,r){r.r(e),r.d(e,{default:function(){return E}});var s=r(252);const i={class:"homepage"},a={key:0};function u(t,e,r,u,l,n){const o=(0,s.up)("ProductFilterForm"),c=(0,s.up)("Container"),d=(0,s.up)("ProductsItem"),p=(0,s.up)("ProductsList");return(0,s.wg)(),(0,s.iD)("main",i,[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(o,{onSubmit:n.filter,filters:l.filters,class:"products-filter"},null,8,["onSubmit","filters"])])),_:1}),(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[n.filteredProducts.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",a,"Ничего не найдено")),(0,s.Wm)(p,{items:n.filteredProducts},{product:(0,s.w5)((({product:t})=>[((0,s.wg)(),(0,s.j4)(d,{key:t.id,id:t.id,descr:t.description,rating:t.rating.rate,price:t.price,imgSrc:t.image},null,8,["id","descr","rating","price","imgSrc"]))])),_:1},8,["items"])])),_:1})])}const l={class:"products-list"};function n(t,e,r,i,a,u){const n=(0,s.up)("Container");return(0,s.wg)(),(0,s.j4)(n,null,{default:(0,s.w5)((()=>[(0,s.WI)(t.$slots,"title",{},void 0,!0),(0,s._)("div",l,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.items,(e=>(0,s.WI)(t.$slots,"product",{product:e},void 0,!0))),256))])])),_:3})}var o=r(734),c={components:{Container:o.Z},props:{items:{type:Array,default:()=>[]}}},d=r(744);const p=(0,d.Z)(c,[["render",n],["__scopeId","data-v-171b8dbf"]]);var m=p,h=r(577);const f={class:"products-item"},v={class:"products-item__inner"},g=["src"],_={class:"products-item__content"},y={class:"products-item__description"},b={class:"products-item__rating"},w={class:"products-item__price"};function I(t,e,r,i,a,u){const l=(0,s.up)("StarRating"),n=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",f,[(0,s._)("div",v,[(0,s._)("img",{src:r.imgSrc,alt:"",class:"products-item__photo"},null,8,g),(0,s._)("div",_,[(0,s._)("p",y,(0,h.zw)(r.descr),1),(0,s._)("div",b,[(0,s.Wm)(l,{rating:r.rating},null,8,["rating"])]),(0,s._)("div",w,"UAH "+(0,h.zw)(r.price),1),(0,s.Wm)(n,{class:"product-item__link",to:{name:"product",params:{id:r.id},query:{name:"John"}}},{default:(0,s.w5)((()=>[(0,s.Uk)("Click me")])),_:1},8,["to"])])])])}var S=r(967),k={name:"ProductsItem",components:{StarRating:S.Z},props:{id:{type:Number,required:!0},descr:{type:String,default:""},rating:{type:Number,default:0},price:{type:Number,required:!0},imgSrc:{type:String,default:""}},methods:{log(t){console.log(t)},handleLinkClick(){console.log("Facebook clicked")}}};const C=(0,d.Z)(k,[["render",I],["__scopeId","data-v-70a66b56"]]);var P=C,V=r(963);function D(t,e,r,i,a,u){const l=(0,s.up)("CustomSelect"),n=(0,s.up)("CustomInput"),o=(0,s.up)("SubmitButton");return(0,s.wg)(),(0,s.iD)("form",{class:"form",onSubmit:e[2]||(e[2]=(0,V.iM)(((...t)=>u.handleSubmit&&u.handleSubmit(...t)),["prevent"]))},[(0,s.Wm)(l,{items:u.cities,modelValue:a.city,"onUpdate:modelValue":e[0]||(e[0]=t=>a.city=t),class:"form__select"},null,8,["items","modelValue"]),(0,s.Wm)(n,{class:"form__submit",modelValue:a.price,"onUpdate:modelValue":e[1]||(e[1]=t=>a.price=t),placeholder:"Цена, от","error-message":"Не должно быть пустым",rules:u.rules},null,8,["modelValue","rules"]),(0,s.Wm)(o,{class:"form__submit",type:"submit"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Подбор продукта ")])),_:1})],32)}const W={class:"wrapper-input"},F=["value"],Z={key:0,class:"custom-input__error"};function $(t,e,r,i,a,u){return(0,s.wg)(),(0,s.iD)("div",W,[(0,s._)("input",(0,s.dG)((0,s.mx)(u.listeners,!0),t.$attrs,{onBlur:e[0]||(e[0]=(...t)=>u.blurHandler&&u.blurHandler(...t)),value:r.value,class:["custom-input",!a.isValid&&"custom-input--error"]}),null,16,F),a.isValid?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",Z,(0,h.zw)(r.errorMessage),1))])}var A={name:"CustomInput",data(){return{isValid:!0,error:"",isFirstInput:!0}},inject:{form:{default:null}},inheritAttrs:!1,props:{value:{type:String,default:""},errorMessage:{type:String,default:""},rules:{type:Array,default:()=>[]}},computed:{listeners(){return{...this.$attrs,input:t=>{console.log("Input value:",t.target.value),this.$emit("input",t.target.value)}}}},watch:{value(t){console.log("Input value changed:",t),this.isFirstInput||this.validate(t)}},mounted(){console.log("Input value:",this.value),this.form&&this.form.registerInput(this)},methods:{validate(){return this.isValid=this.rules.every((t=>{const{hasPassed:e,message:r}=t(this.value);return e||(this.error=r||this.errorMessage),e})),this.isValid},blurHandler(){this.isFirstInput&&this.validate(),this.isFirstInput=!1},reset(){this.isFirstInput=!0,this.isValid=!0,this.$emit("input","")}}};const B=(0,d.Z)(A,[["render",$],["__scopeId","data-v-304ffb2d"]]);var q=B;const H=["value","selected"];function j(t,e,r,i,a,u){return(0,s.wg)(),(0,s.iD)("select",(0,s.dG)((0,s.mx)(u.attrs,!0),t.$attrs,{class:"custom-select"}),[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.formatedItems,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.value,value:t.value,selected:t.selected},(0,h.zw)(t.label),9,H)))),128))],16)}var K={name:"CustomSelect",props:{items:{type:Array,required:!0}},computed:{attrs(){return{...this.$attrs,input:t=>this.$emit("input",t.target.value)}},formatedItems(){return this.items.map((t=>"object"===typeof t?t:{value:t,label:t}))}}};const M=(0,d.Z)(K,[["render",j],["__scopeId","data-v-2bc131d0"]]);var N=M,U=r(667);const z=t=>({hasPassed:!!t,message:"Пожалуйста заполните это поле"}),L=t=>e=>({hasPassed:e.length<=t,message:"Вы превысели лимит"});var x={components:{CustomSelect:N,CustomInput:q,SubmitButton:U.Z},data(){return{price:"",city:""}},inheritAttrs:!1,computed:{rules(){return[z,L(10)]},cities(){return[{value:"",label:"Город",selected:!0},"Kyiv","Odesa","Poltava","Kharkiv","Dnipro","Lviv","Kherson","Mariupol"]}},methods:{handleSubmit(){this.$emit("submit",{city:this.city,price:this.price})}}};const G=(0,d.Z)(x,[["render",D],["__scopeId","data-v-1bd11b62"]]);var R=G,Y=r(346),J={name:"App",components:{ProductsList:m,ProductsItem:P,Container:o.Z,ProductFilterForm:R},data(){return{text:"",products:[],filters:{city:"",price:0}}},inheritAttrs:!1,computed:{filteredProducts(){return this.filterByCityName(this.filterByPrice(this.products))}},async created(){try{const{data:t}=await(0,Y.j)();this.products=t}catch(t){console.error(t)}},methods:{filter({city:t,price:e}){this.filters.city=t,this.filters.price=e},filterByCityName(t){return this.filter.city?t.filter((t=>t.location.city===this.filters.city)):t},filterByPrice(t){return this.filter.price?t.filter((t=>t.price>=this.filters.price)):t}}};const O=(0,d.Z)(J,[["render",u],["__scopeId","data-v-0d285465"]]);var E=O}}]);
//# sourceMappingURL=167.69a8751e.js.map